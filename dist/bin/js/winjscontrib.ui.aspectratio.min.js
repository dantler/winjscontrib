/* 
 * WinJS Contrib v2.1.0.7
 * licensed under MIT license (see http://opensource.org/licenses/MIT)
 * sources available at https://github.com/gleborgne/winjscontrib
 */

!function(){"use strict";WinJS.Namespace.define("WinJSContrib.UI",{AspectRatio:WinJS.Class.mix(WinJS.Class.define(function(t,e){this.element=t||document.createElement("DIV"),e=e||{},this.element.winControl=this,this.element.style.display="none",this.element.classList.add("mcn-aspectratio"),this.element.classList.add("win-disposable"),this.element.classList.add("mcn-layout-ctrl"),WinJS.UI.setOptions(this,e),this.render()},{baseWidth:{get:function(){return this._baseWidth},set:function(t){this._baseWidth=t}},baseWidthMin:{get:function(){return this._baseWidthMin},set:function(t){this._baseWidthMin=t}},baseWidthMargin:{get:function(){return this._baseWidthMargin||0},set:function(t){this._baseWidthMargin=t}},baseHeight:{get:function(){return this._baseHeight},set:function(t){this._baseHeight=t}},baseHeightMin:{get:function(){return this._baseHeightMin},set:function(t){this._baseHeightMin=t}},baseHeightMargin:{get:function(){return this._baseHeightMargin||0},set:function(t){this._baseHeightMargin=t}},ratio:{get:function(){return this._ratio},set:function(t){this._ratio=t}},basedOn:{get:function(){return this._basedOn},set:function(t){this._basedOn=t}},target:{get:function(){return this._target},set:function(t){this._target=t}},render:function(){var t=this;t.styleElt||(t.styleElt=document.createElement("STYLE"),t.element.appendChild(t.styleElt)),t.updateLayout()},pageLayout:function(){this.updateLayout()},updateLayout:function(){var t=this;t.parentpage||(t.parentpage=WinJSContrib.Utils.getScopeControl(t.element)),t.container||(t.container=t.element.parentElement),t.container&&t.target&&("height"==t.basedOn?t.updateLayoutBasedOnHeight():t.updateLayoutBasedOnWidth())},updateLayoutBasedOnWidth:function(){var t=this,e=t.target;t.prefix&&(e=t.prefix+" "+e);var i=t.parentpage.element;if(t.baseWidth){var n=(t.container.clientWidth/t.baseWidth<<0)+1,a=(t.container.clientWidth/n<<0)-t.baseWidthMargin-.25;if(t.ratio){var s=a/t.ratio<<0;t.styleElt.innerHTML=e+"{ width: "+a+"px; height:"+s+"px}"}else t.styleElt.innerHTML=e+"{ width: "+a+"px; }"}else if(t.ratio){{var r=t.container.querySelectorAll(t.target),h=r[0].clientWidth;r[0].clientHeight}if(h>0){var s=h/t.ratio<<0;if(t.max){var l=i.clientHeight*t.max/100<<0;s>l&&(s=l)}t.styleElt.innerHTML=e+"{ height:"+s+"px}"}}else console.warn("aspect ratio control must have baseWidth and/or ratio")},updateLayoutBasedOnHeight:function(){var t=this,e=t.target;if(t.prefix&&(e=t.prefix+" "+e),t.baseHeight){var i=(t.container.clientHeight/t.baseHeight<<0)+1,n=(t.container.clientHeight/i<<0)-t.baseHeightMargin,a=n/t.ratio<<0;t.styleElt.innerHTML=e+"{ width: "+a+"px; height:"+n+"px}"}else{var s=t.container.querySelectorAll(t.target),r=(s[0].clientWidth,s[0].clientHeight);if(r>0){var a=r*t.ratio<<0;if(t.max){var h=t.container.clientWidth*t.max/100<<0;a>h&&(a=h)}t.styleElt.innerHTML=e+"{ width:"+a+"px}"}}},dispose:function(){var t=this;t.parentpage=null,t.container=null,t.styleElt.parentElement.removeChild(t.styleElt),WinJS.Utilities.disposeSubTree(this.element),this.element=null}}),WinJS.Utilities.eventMixin,WinJS.Utilities.createEventProperties("myevent"))})}();