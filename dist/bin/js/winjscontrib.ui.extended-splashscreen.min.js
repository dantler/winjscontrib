/* 
 * WinJS Contrib v2.1.0.7
 * licensed under MIT license (see http://opensource.org/licenses/MIT)
 * sources available at https://github.com/gleborgne/winjscontrib
 */

!function(){"use strict";WinJS.Navigation;WinJS.Namespace.define("WinJSContrib.UI",{ExtendedSplash:WinJS.Class.define(function(e,s){var n=this;s=s||{},n.element=e||document.createElement("div"),n.enterAnimation=s.enterAnimation||function(){var e=this;return WinJSContrib.UI.Animation.fadeIn(e.splashLoader,{duration:500})},n.exitAnimation=s.enterAnimation||function(){var e=this,s=WinJSContrib.UI.Animation.fadeOut(e.element.querySelector("#mcn-splashscreen-loader"),{duration:500}),n=WinJSContrib.UI.Animation.fadeOut(e.element,{duration:500,delay:200});return WinJS.Promise.join([s,n]).then(function(){e.element.style.display="none"})},n.isVisible=!1,WinJSContrib.UI.Application=WinJSContrib.UI.Application||{},WinJSContrib.UI.Application.splashscreen=n,n.element.className="mcn-splashscreen "+n.element.className,WinJSContrib.CrossPlatform&&WinJSContrib.CrossPlatform.crossPlatformClass&&WinJSContrib.CrossPlatform.crossPlatformClass(n.element),n.splashImageFile=s.image||"/images/splashscreen.png",n.element.innerHTML||n.defaultSplashContent(s.text||"chargement en cours",s.description),console.log(n.element.innerHTML),n.textElement||(n.textElement=n.element.querySelector(".mcn-splashscreen-loader-text")),n.splashImage||(n.splashImage=n.element.querySelector("#mcn-splashscreen-image")),n.splashLoader||(n.splashLoader=n.element.querySelector("#mcn-splashscreen-loader")),n.handleResizeBinded=n.handleResize.bind(n),n.handleDismissedBinded=n.handleDismissed.bind(n)},{defaultSplashContent:function(e){var s=this;if(WinJSContrib.CrossPlatform&&(WinJSContrib.CrossPlatform.isMobile.Android()||WinJSContrib.CrossPlatform.isMobile.iOS())){s.splashImage=document.createElement("img"),s.splashImage.src=this.splashImageFile,s.splashImage.id="mcn-splashscreen-image",s.element.appendChild(s.splashImage),s.splashLoader=document.createElement("div"),s.splashLoader.style.opacity=0,s.splashLoader.id="mcn-splashscreen-loader",s.splashLoader.className="mcn-cordova-spalsh";var n=document.createElement("div");n.className="cordova-ring",n.innerHTML='<div class="wBall" id="wBall_1"><div class="wInnerBall"></div></div><div class="wBall" id="wBall_2"><div class="wInnerBall"></div></div><div class="wBall" id="wBall_3"><div class="wInnerBall"></div></div><div class="wBall" id="wBall_4"><div class="wInnerBall"></div></div><div class="wBall" id="wBall_5"><div class="wInnerBall"></div></div></div>',s.textElement=document.createElement("div"),s.textElement.className="mcn-splashscreen-loader-text",s.textElement.innerText=e||"",s.splashLoader.appendChild(n),s.splashLoader.appendChild(s.textElement),s.element.appendChild(s.splashLoader)}else s.element.innerHTML='<img id="mcn-splashscreen-image" src="'+this.splashImageFile+'" alt="Splash screen image" /><div id="mcn-splashscreen-loader" style="opacity: 0"><progress class="win-ring"></progress><div class="mcn-splashscreen-loader-text">'+(e||"")+"</div></div>"},handleResize:function(){this.setLocation()},handleDismissed:function(e){e.target.removeEventListener("dismissed",this.handleDismissedBinded)},init:function(e){var s=this;return WinJS.Promise.timeout().then(function(){e&&e.detail&&e.detail.splashScreen&&s.setLocation(e.detail.splashScreen),s.element.style.display=""})},show:function(e,s){console.log("show splash");var n=this;return s&&n.init(s),n&&console.log("ctrl"),console.log(n),n.splashLoader&&console.log("ctrl.splashLoader"),n.splashLoader.style&&console.log("ctrl.splashLoader.style"),n.element&&console.log("ctrl.element"),n.splashLoader.style.opacity=0,n.element.style.display="",n.element.style.opacity="",setImmediate&&console.log("setImmediate"),new WinJS.Promise(function(s,i){setImmediate(function(){window.addEventListener("resize",n.handleResizeBinded,!1),n.enterAnimation.bind(n)()}),WinJS.Promise.join([e,WinJS.Promise.timeout(200)]).done(function(){console.log("show splash complete"),s()},function(){console.log("show splash error"),i()})})},setLocation:function(e){var s=this;e&&e.imageLocation?(s.splashImage.style.position="absolute",s.splashImage.style.top=e.imageLocation.y+"px",s.splashImage.style.left=e.imageLocation.x+"px",s.splashImage.style.width=e.imageLocation.width+"px",s.splashImage.style.position="absolute",s.splashLoader.style.top=e.imageLocation.y+e.imageLocation.height+20+"px",s.splashLoader.style.left=e.imageLocation.x+"px"):(s.splashImage.style.position="",s.splashImage.style.top="",s.splashImage.style.left="",s.splashImage.style.height="",s.splashImage.style.width="",s.splashImage.style.position="",s.splashLoader.style.top="",s.splashLoader.style.left="",s.splashLoader.style.height="",s.splashLoader.style.width="")},hide:function(){var e=this;return WinJSContrib.UI.appbarsEnable(),window.removeEventListener("resize",e.handleResizeBinded),e.exitAnimation.bind(e)()}})})}();