/* 
 * WinJS Contrib v2.1.0.7
 * licensed under MIT license (see http://opensource.org/licenses/MIT)
 * sources available at https://github.com/gleborgne/winjscontrib
 */

!function(){"use strict";WinJS.Namespace.define("WinJSContrib.UI",{ItemSwipe:WinJS.Class.mix(WinJS.Class.define(function(e,i){var t=this;this.element=e||document.createElement("DIV"),i=i||{},this.element.winControl=this,this.element.classList.add("mcn-itemswipe"),this.element.classList.add("win-disposable"),this.minSwipe=100,this.thresholdFactor=3,this.hoverDelay=600,this.faceCard=this.element.querySelector(".face"),this.swipeToLeftCard=this.element.querySelector(".swipe-to-left"),this.swipeToRightCard=this.element.querySelector(".swipe-to-right"),WinJS.UI.setOptions(this,i),this.eventTracker=new WinJSContrib.UI.EventTracker,this.faceCard&&(this.swipeslide=new WinJSContrib.UI.SwipeSlide(this.faceCard,{capturePointerOnDown:!0,touchOnly:!0,minSwipeDistance:t.minSwipe}),t.swipeToLeftCard||(this.swipeslide.allowed.left=!1),t.swipeToRightCard||(this.swipeslide.allowed.right=!1),this.eventTracker.addEvent(t.element,"pointerenter",function(e){"mouse"==e.pointerType&&t.faceCard.classList.add("mousehover")},!1),this.eventTracker.addEvent(t.element,"pointerleave",function(e){"mouse"==e.pointerType?setTimeout(function(){t.faceCard.classList.remove("mousehover")},100):t.faceCard.classList.remove("mousehover")},!1),this.eventTracker.addEvent(this.swipeslide,"swipestart",function(e){t._processSwipeStart(e)}),this.eventTracker.addEvent(this.swipeslide,"swipeend",function(e){t._cleanState(e)}),this.eventTracker.addEvent(this.swipeslide,"swipe",function(e){t._processSwipe(e)}),this.eventTracker.addEvent(this.swipeslide,"swipeprogress",function(e){t._processSwipeProgress(e)}),this.eventTracker.addEvent(this.swipeslide,"invoked",function(e){t._processInvoked(e)}))},{item:{get:function(){return this._item},set:function(e){this._item=e}},minSwipe:{get:function(){return this._minSwipe},set:function(e){this._minSwipe=e,this.swipeslide&&(this.swipeslide.minSwipeDistance=e)}},thresholdFactor:{get:function(){return this._thresholdFactor},set:function(e){this._thresholdFactor=e,this.swipeslide&&(this.swipeslide.thresholdFactor=e)}},_processSwipeProgress:function(e){var i=this;"left"==e.direction?(i.swipeToRightCard&&i.swipeToRightCard.classList.remove("swiping"),i.swipeToLeftCard&&(i.swipeToLeftCard.classList.add("swiping"),e.accept?i.swipeToLeftCard.classList.add("accepted"):i.swipeToLeftCard.classList.remove("accepted"))):"right"==e.direction&&(i.swipeToLeftCard&&i.swipeToLeftCard.classList.remove("swiping"),i.swipeToRightCard&&(i.swipeToRightCard.classList.add("swiping"),e.accept?i.swipeToRightCard.classList.add("accepted"):i.swipeToRightCard.classList.remove("accepted")))},_processSwipe:function(e){var i=this;i._cleanState(),"left"==e.direction?WinJSContrib.Utils.triggerCustomEvent(i.element,"itemswipeleft",!0,!1,{element:i.element,item:i.item}):"right"==e.direction&&WinJSContrib.Utils.triggerCustomEvent(i.element,"itemswiperight",!0,!1,{element:i.element,item:i.item})},_processSwipeStart:function(e){var i=this;i._cleanState()},_cleanState:function(){var e=this;e.swipeToLeftCard&&(e.swipeToLeftCard.classList.remove("swiping"),e.swipeToLeftCard.classList.remove("accepted")),e.swipeToRightCard&&(e.swipeToRightCard.classList.remove("swiping"),e.swipeToRightCard.classList.remove("accepted"))},_processInvoked:function(e){var i=this;console.log("invoked"),WinJSContrib.Utils.triggerEvent(i.element,"click",!0,!1),WinJSContrib.Utils.triggerCustomEvent(i.element,"itemswipeinvoked",!0,!1,{element:i.element,item:i.item})},dispose:function(){this.eventTracker&&this.eventTracker.dispose(),this.swipeslide&&this.swipeslide.dispose(),WinJS.Utilities.disposeSubTree(this.element),this.element=null}}),WinJS.UI.DOMEventMixin,WinJS.Utilities.createEventProperties("itemswipeleft","itemswiperight","itemswipeinvoked"))})}();