/* 
 * WinJS Contrib v2.1.0.7
 * licensed under MIT license (see http://opensource.org/licenses/MIT)
 * sources available at https://github.com/gleborgne/winjscontrib
 */

var WinJSContrib;!function(t){var e;!function(e){function n(t){if(t.detail.kind===Windows.ApplicationModel.Activation.ActivationKind.protocol&&t.detail.uri){var e={action:void 0},n={},i=t.detail.uri.query;return"?"==i[0]&&(i=i.substr(1)),i&&i.split("&").forEach(function(t){var e=t.split("=");n[e[0]]=decodeURIComponent(e[1])}),e.protocol={action:t.detail.uri.host,args:n},e}}function i(){var t=Windows.Networking.Connectivity.NetworkConnectivityLevel,e=Windows.Networking.Connectivity.NetworkInformation.getInternetConnectionProfile();if(null!==e){var n=e.getNetworkConnectivityLevel();return n===t.constrainedInternetAccess||n===t.internetAccess}return!1}function o(){var t=Windows.Networking.Connectivity.NetworkConnectivityLevel,e=Windows.Networking.Connectivity.NetworkInformation.getInternetConnectionProfile();if(null!==e){var n=e.getNetworkConnectivityLevel();return n===t.internetAccess}return!1}function r(e){var n=function(n){e(t.WinRT.hasInternetAccess())},i=Windows.Networking.Connectivity.NetworkInformation;return i.addEventListener("networkstatuschanged",n),function(){i.removeEventListener("networkstatuschanged",n)}}e.readProtocol=n,e.isConnected=i,e.hasInternetAccess=o,e.onInternetStatusChanged=r}(e=t.WinRT||(t.WinRT={}))}(WinJSContrib||(WinJSContrib={}));var WinJSContrib;!function(t){var e;!function(e){function n(t){var e=window;if(t){if(e.Windows){var n=new Windows.UI.Popups.MessageDialog(t.content);return t.title&&(n.title=t.title),t.commands&&t.commands.forEach&&t.commands.forEach(function(t,e){var i=new Windows.UI.Popups.UICommand;t.id&&(i.id=t.id),i.label=t.label,t.callback&&(i.invoked=t.callback),n.commands.append(i),t.isDefault&&(n.defaultCommandIndex=e)}),n.showAsync()}return new WinJS.Promise(function(n,i){var o="";t.title&&(o=t.title);var r=[];t.commands&&t.commands.forEach?t.commands.forEach(function(t,e){r.push(t.label)}):r=["Ok"],e.navigator&&e.navigator.notification&&e.navigator.notification.confirm?e.navigator.notification.confirm(t.content,function(e){if(t.commands&&t.commands[e-1]&&t.commands[e-1].callback){var i=t.commands[e-1].callback();i&&i.then?i.then(function(){n(!0)}):n(!0)}else n(0!=e?!0:!1)},o,r):n(window.confirm(o)?!0:!1)})}return WinJS.Promise.wrapError("you must specify commands as an array of objects with properties text and callback such as {text: '', callback: function(c){}}")}function i(e,n){return t.Alerts.messageBox({title:e,content:n})}function o(e,n,i,o){return new WinJS.Promise(function(r,a){t.Alerts.messageBox({title:e,content:n,commands:[{label:i,callback:function(t){r(!0)},isDefault:!0},{label:o,callback:function(t){r(!1)}}]})})}function r(t){if(!Windows)throw"No notification plugin found";var e=Windows.UI.Notifications,n=t.template||(t.picture?e.ToastTemplateType.toastImageAndText01:e.ToastTemplateType.toastText01),i=e.ToastNotificationManager.getTemplateContent(n),o=i.getElementsByTagName("text"),r=i.getElementsByTagName("image");if(t.launch){var a=i.getElementsByTagName("toast");a[0].setAttribute("launch",JSON.stringify(t.launch))}o[0].appendChild(i.createTextNode(t.text)),t.text2&&o.length>1&&o[1].appendChild(i.createTextNode(t.text2)),t.text3&&o.length>1&&o[2].appendChild(i.createTextNode(t.text3)),t.picture&&r[0].setAttribute("src",t.picture);var s=new e.ToastNotification(i),c=e.ToastNotificationManager.createToastNotifier();c.show(s)}function a(e,n){t.Alerts.toastNotification({text:e,picture:n})}e.messageBox=n,e.message=i,e.confirm=o,e.toastNotification=r,e.toast=a}(e=t.Alerts||(t.Alerts={}))}(WinJSContrib||(WinJSContrib={}));var WinJSContrib;!function(t){var e;!function(e){var n=function(){function e(t){this.maxNumberOfFiles=10,this.maxBufferSize=50,this.maxFlushDelay=2e3,this.maxFileSize=3145728,this.buffer=[],this.file=t,this.readyPromise=WinJS.Promise.wrap(t)}return e.from=function(t,n){var i=new e(null);return i.readyPromise=t.createFileAsync(n,Windows.Storage.CreationCollisionOption.openIfExists).then(function(t){return i.file=t,t}),i},e.prototype.clone=function(){var t=new e(this.file);return t.maxBufferSize=this.maxBufferSize,t.maxFlushDelay=this.maxFlushDelay,t},e.prototype.format=function(t,e,n){},e.prototype.log=function(e,n,i){for(var o=this,r=[],a=3;a<arguments.length;a++)r[a-3]=arguments[a];var s;s=i&&t.Logs.Levels[i]?t.Logs.Levels[i].toUpperCase():"UKN",this.buffer.push((new Date).getTime()+"	"+s+"	"+(e.Config.prefix?e.Config.prefix+"	":"")+n),r&&r.length&&r.forEach(function(t){o.buffer.push("string"==typeof t?"	"+t:"\r\n"+JSON.stringify(t))}),this.buffer.push("\r\n"),this.maxBufferSize&&this.buffer.length>this.maxBufferSize&&this.flush(),this.maxFlushDelay&&!this.flushTimeout&&(this.flushTimeout=setTimeout(function(){o.flushTimeout=null,o.flush()},this.maxFlushDelay))},e.prototype.flush=function(){var t=this;if(t.readyPromise&&t.buffer.length){var e=t.readyPromise,n=t.buffer.join("");return t.buffer=[],t.readyPromise=new WinJS.Promise(function(i,o){e.then(function(e){return Windows.Storage.FileIO.appendTextAsync(t.file,n).then(function(){return t.file},function(e){return console.error("error appending logs to "+t.file.path,e),t.file})}).then(function(){return t.file&&t.maxFileSize?t._swapCurrentFile():void 0}).then(i,function(t){console.error(t),i()})}),t.readyPromise}return WinJS.Promise.wrap()},e.prototype._swapCurrentFile=function(){var e=this;return e.file.getBasicPropertiesAsync().then(function(n){if(n.size>e.maxFileSize){var i=e.file.path,o=e.file.name,r=new Date,a=""+r.getFullYear()+t.Utils.pad2(r.getMonth()+1)+t.Utils.pad2(r.getDate())+t.Utils.pad2(r.getHours())+t.Utils.pad2(r.getMinutes())+r.getMilliseconds();return Windows.Storage.StorageFolder.getFolderFromPathAsync(i.substr(0,i.lastIndexOf("\\"))).then(function(t){return e.file.renameAsync(a+"."+o,Windows.Storage.NameCollisionOption.generateUniqueName).then(function(){return t.createFileAsync(o).then(function(t){return e.file=t,t})})}).then(function(){return e._cleanup()})}})},e.prototype._cleanup=function(){var e=this,n=e.file.path,i=e.file.name;return Windows.Storage.StorageFolder.getFolderFromPathAsync(n.substr(0,n.lastIndexOf("\\"))).then(function(o){return o.getFilesAsync().then(function(o){var r=o.filter(function(t){return(t.path.indexOf(i)>=0||t.path.indexOf(i+".old")>=0)&&t.path!=n?!0:!1});if(!(r.length<=e.maxNumberOfFiles))return r=r.slice(0,r.length-e.maxNumberOfFiles),t.Promise.parallel(r,function(t){return t.deleteAsync()})})})},e.prototype.group=function(t){},e.prototype.groupCollapsed=function(t){},e.prototype.groupEnd=function(){},e}();e.WinRTFileLogger=n}(e=t.Logs||(t.Logs={}))}(WinJSContrib||(WinJSContrib={}));